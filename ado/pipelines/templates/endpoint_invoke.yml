parameters:
  - name: endpointName
    type: string

  - name: deploymentName
    type: string

  - name: integrationTestsPath
    type: string

steps:

- task: AzureCLI@2
  displayName: 'Endpoint Invoke'
  name: endpointInvokeTask
  inputs:
    connectedServiceNameARM: $(serviceConnection)
    scriptType: bash
    scriptLocation: inlineScript
    inlineScript: python ado/scripts/endpoint_invoke.py -s $(subscriptionId) -rg $(resourceGroupName) -ws $(workspaceName) -e ${{ parameters.endpointName }} -d ${{ parameters.deploymentName }} -itp ${{ parameters.integrationTestsPath}}
